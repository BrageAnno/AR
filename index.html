<!DOCTYPE html>
<html>
<head>
  <title>Inside Sphere Viewer</title>
  <script src="aframe.min.js"></script> <!-- Include A-Frame library -->
</head>
<body>
  <a-scene device-orientation-permission-ui>
    <!-- Import your existing .glb file -->
    <a-entity id="sphere" gltf-model="./360_HDRI_Test.glb" rotation="0 0 0"></a-entity>

    <!-- Place the camera inside the sphere -->
    <a-entity camera position="0 0 0"></a-entity>
  </a-scene>

  <script>
    // Listen for device orientation events
    window.addEventListener('deviceorientation', function(event) {
      var alpha = event.alpha; // Compass direction in degrees

      // Get the sphere entity
      var sphere = document.getElementById('sphere');

      // Adjust the rotation of the sphere to make a specific point always face north
      // Here, we assume that the Y-axis of the sphere is the axis we want to align with north
      // You may need to adjust this based on your specific sphere's orientation
      
      // Initialize rotation
      var rotation = { x: 0, y: 0, z: 0 };

      // Check if the device is inverted
      var inverted = false;
      if (alpha > 180) {
        inverted = true;
        alpha -= 180;
      }

      // Adjust the rotation
      rotation.y = inverted ? alpha : alpha + 180;
      
      // Ensure the rotation value is within the range of 0 to 360 degrees
      rotation.y %= 360;
      
      // Set the new rotation value
      sphere.setAttribute('rotation', rotation);
    });
  </script>
</body>
</html>